{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">Gallery</h1>
    <div class="gallery-container">
        <div class="gallery-slideshow">
            {% for image in images %}
                <div class="slide">
                    <img src="{{ image.image.url }}" alt="{{ image.title }}" class="img-fluid">
                    <div class="description p-3 bg-soft-cream">
                        <p>{{ image.description }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="controls">
            <button class="prev btn btn-light">❮</button>
            <button class="next btn btn-light">❯</button>
        </div>
    </div>

<h2>Reviews</h2>
<div class="reviews-box">
    {% for review in reviews %}
        <div class="review-card">
            <h3>{{ review.author.username }}</h3>
            <p>Rating: {{ review.get_rating_display }}</p>
            <p>{{ review.content }}</p>
            <small>{{ review.created_on }}</small>
        </div>
    {% endfor %}
</div>

{% if user.is_authenticated %}
    <div class="review-form">
        <h3>Leave a Review</h3>
        <form method="post">
            {% csrf_token %}
            {{ review_form.as_p }}
            <button type="submit" class="btn btn-primary">Submit Review</button>
        </form>
    </div>
{% else %}
    <p>You need to <a href="{% url 'login' %}">log in</a> to leave a review.</p>
{% endif %}
{% endblock %}